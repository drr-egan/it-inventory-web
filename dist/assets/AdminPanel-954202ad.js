var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var P=(s,n,l)=>n in s?W(s,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[n]=l,c=(s,n)=>{for(var l in n||(n={}))H.call(n,l)&&P(s,l,n[l]);if(V)for(var l of V(n))ee.call(n,l)&&P(s,l,n[l]);return s},d=(s,n)=>X(s,Y(n));var N=(s,n,l)=>new Promise((D,$)=>{var u=x=>{try{p(l.next(x))}catch(S){$(S)}},C=x=>{try{p(l.throw(x))}catch(S){$(S)}},p=x=>x.done?D(x.value):Promise.resolve(x.value).then(u,C);p((l=l.apply(s,n)).next())});import{j as e,d as F}from"./index-f1da842b.js";import{r as T}from"./react-vendor-3371026b.js";import{f as U,j as R,d as B,w as ae,h as te}from"./firebase-vendor-fdbb15af.js";import{M as q}from"./MaterialCard-8fc81c93.js";import{M as j}from"./MaterialButton-f2cb0050.js";import{M as E}from"./MaterialInput-1fa89727.js";const de=({user:s,items:n,users:l,checkoutHistory:D,notifications:$})=>{const[u,C]=T.useState({name:"",category:"",quantity:"",price:"",minThreshold:"5"}),[p,x]=T.useState({firstName:"",lastName:"",costCode:"",department:""}),[S,L]=T.useState(!1),[M,_]=T.useState(!1),[b,y]=T.useState({importingItems:!1,importingUsers:!1,exportingItems:!1,exportingUsers:!1}),z=a=>N(void 0,null,function*(){a.preventDefault(),L(!0);try{const t={name:u.name.trim(),category:u.category||"Uncategorized",quantity:parseInt(u.quantity)||0,price:parseFloat(u.price)||0,minThreshold:parseInt(u.minThreshold)||5,createdAt:U(),lastUpdated:U(),createdBy:(s==null?void 0:s.employeeID)||(s==null?void 0:s.email)||"admin"};yield R(B(F,"items"),t),C({name:"",category:"",quantity:"",price:"",minThreshold:"5"}),alert(`Item "${t.name}" created successfully!`)}catch(t){console.error("Error creating item:",t),alert(`Failed to create item: ${t.message}`)}finally{L(!1)}}),Q=a=>N(void 0,null,function*(){a.preventDefault(),_(!0);try{const t={firstName:p.firstName.trim(),lastName:p.lastName.trim(),name:`${p.firstName.trim()} ${p.lastName.trim()}`,costCode:p.costCode||`${Date.now()}-${Math.floor(Math.random()*1e3)}-5770`,department:p.department||"General",status:"active",createdAt:U(),createdBy:(s==null?void 0:s.employeeID)||(s==null?void 0:s.email)||"admin"};yield R(B(F,"users"),t),x({firstName:"",lastName:"",costCode:"",department:""}),alert(`User "${t.name}" created successfully!`)}catch(t){console.error("Error creating user:",t),alert(`Failed to create user: ${t.message}`)}finally{_(!1)}}),O=()=>N(void 0,null,function*(){y(a=>d(c({},a),{exportingItems:!0}));try{const t=[["Item Name","Category","Quantity","Price","ASIN","Min Threshold"].join(",")];n.forEach(o=>{const I=[`"${o.name||""}"`,`"${o.category||"Uncategorized"}"`,o.quantity||0,o.price||0,`"${o.asin||""}"`,o.minThreshold||5];t.push(I.join(","))});const v=t.join(`
`),f=new Blob([v],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(f),i.download=`inventory-items-${new Date().toISOString().split("T")[0]}.csv`,i.click(),alert(`Exported ${n.length} items to CSV`)}catch(a){alert(`Export failed: ${a.message}`)}finally{y(a=>d(c({},a),{exportingItems:!1}))}}),G=()=>N(void 0,null,function*(){y(a=>d(c({},a),{exportingUsers:!0}));try{const t=[["EmployeeID","First Name","Last Name","Cost Code","Department","Status"].join(",")];l.forEach(o=>{const I=[`"${o.employeeID||""}"`,`"${o.firstName||""}"`,`"${o.lastName||""}"`,`"${o.costCode||o.cost_code||""}"`,`"${o.department||""}"`,`"${o.status||"active"}"`];t.push(I.join(","))});const v=t.join(`
`),f=new Blob([v],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(f),i.download=`inventory-users-${new Date().toISOString().split("T")[0]}.csv`,i.click(),alert(`Exported ${l.length} users to CSV`)}catch(a){alert(`Export failed: ${a.message}`)}finally{y(a=>d(c({},a),{exportingUsers:!1}))}}),Z=a=>{const t=a.target.files[0];if(!t)return;y(f=>d(c({},f),{importingItems:!0}));const v=new FileReader;v.onload=f=>N(void 0,null,function*(){try{const o=f.target.result.split(`
`),I=o[0].split(",").map(h=>h.replace(/"/g,"").trim());let A=0,w=0;for(let h=1;h<o.length;h++)if(o[h].trim())try{const m=o[h].split(",").map(k=>k.replace(/"/g,"").trim()),r={};if(I.forEach((k,g)=>{switch(k.toLowerCase()){case"item name":case"name":r.name=m[g];break;case"category":r.category=m[g]||"Uncategorized";break;case"quantity":r.quantity=parseInt(m[g])||0;break;case"price":r.price=parseFloat(m[g])||0;break;case"min threshold":r.minThreshold=parseInt(m[g])||5;break;case"asin":r.asin=m[g];break}}),!r.name){w++;continue}r.createdAt=U(),r.lastUpdated=U(),r.createdBy=(s==null?void 0:s.employeeID)||(s==null?void 0:s.email)||"csv-import",yield R(B(F,"items"),r),A++}catch(m){w++,console.error("Error importing item:",m)}alert(`Import completed: ${A} items added, ${w} errors`)}catch(i){alert(`Import failed: ${i.message}`)}finally{y(i=>d(c({},i),{importingItems:!1})),a.target.value=""}}),v.readAsText(t)},J=a=>{const t=a.target.files[0];if(!t)return;y(f=>d(c({},f),{importingUsers:!0}));const v=new FileReader;v.onload=f=>N(void 0,null,function*(){try{const o=f.target.result.split(`
`),I=o[0].split(",").map(h=>h.replace(/"/g,"").trim());let A=0,w=0;for(let h=1;h<o.length;h++)if(o[h].trim())try{const m=o[h].split(",").map(k=>k.replace(/"/g,"").trim()),r={};if(I.forEach((k,g)=>{switch(k.toLowerCase()){case"employeeid":case"employee id":case"employee_id":r.employeeID=m[g];break;case"first name":case"firstname":r.firstName=m[g];break;case"last name":case"lastname":r.lastName=m[g];break;case"cost code":case"costcode":r.costCode=m[g];break;case"department":r.department=m[g];break}}),!r.firstName||!r.lastName){w++;continue}r.name=`${r.firstName} ${r.lastName}`,r.status="active",r.costCode=r.costCode||`${Date.now()}-${Math.floor(Math.random()*1e3)}-5770`,r.createdAt=U(),r.createdBy=(s==null?void 0:s.employeeID)||(s==null?void 0:s.email)||"csv-import",yield R(B(F,"users"),r),A++}catch(m){w++,console.error("Error importing user:",m)}alert(`Import completed: ${A} users added, ${w} errors`)}catch(i){alert(`Import failed: ${i.message}`)}finally{y(i=>d(c({},i),{importingUsers:!1})),a.target.value=""}}),v.readAsText(t)},K=()=>N(void 0,null,function*(){if(confirm("Are you sure you want to reset ALL item quantities to zero? This cannot be undone."))try{const a=ae(F);n.forEach(t=>{const v=te(F,"items",t.id);a.update(v,{quantity:0,lastUpdated:U()})}),yield a.commit(),alert(`Reset quantities for ${n.length} items`)}catch(a){alert(`Bulk reset failed: ${a.message}`)}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[var(--md-sys-color-surface-container)] rounded-lg p-6 md-elevation-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-[var(--md-sys-color-on-surface)] flex items-center mb-2",children:[e.jsx("span",{className:"material-icons mr-2",children:"admin_panel_settings"}),"Administration"]}),e.jsx("p",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Administrative tools, data management, and bulk operations"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs(q,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-blue-600",children:"add_box"}),"Add New Item"]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsx(E,{label:"Item Name",value:u.name,onChange:a=>C(t=>d(c({},t),{name:a.target.value})),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"Price",type:"number",step:"0.01",value:u.price,onChange:a=>C(t=>d(c({},t),{price:a.target.value})),placeholder:"0.00"}),e.jsx(E,{label:"Quantity",type:"number",value:u.quantity,onChange:a=>C(t=>d(c({},t),{quantity:a.target.value})),placeholder:"0"})]}),e.jsxs("div",{className:"mat-input",children:[e.jsxs("select",{value:u.category,onChange:a=>C(t=>d(c({},t),{category:a.target.value})),className:"w-full px-3 py-2 bg-[var(--md-sys-color-surface-container-high)] text-[var(--md-sys-color-on-surface)] rounded-lg border border-[var(--md-sys-color-outline-variant)]",children:[e.jsx("option",{value:"",children:"Choose category..."}),e.jsx("option",{value:"Electronics",children:"Electronics"}),e.jsx("option",{value:"Accessories",children:"Accessories"}),e.jsx("option",{value:"Cables",children:"Cables"}),e.jsx("option",{value:"Office",children:"Office"}),e.jsx("option",{value:"Hardware",children:"Hardware"}),e.jsx("option",{value:"Software",children:"Software"}),e.jsx("option",{value:"Supplies",children:"Supplies"})]}),e.jsx("label",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Category"})]}),e.jsx(j,{type:"submit",variant:"contained",color:"primary",className:"w-full",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"add"}),"Create Item"]})})]})]}),e.jsxs(q,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-green-600",children:"person_add"}),"Add New User"]}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"First Name",value:p.firstName,onChange:a=>x(t=>d(c({},t),{firstName:a.target.value})),required:!0}),e.jsx(E,{label:"Last Name",value:p.lastName,onChange:a=>x(t=>d(c({},t),{lastName:a.target.value})),required:!0})]}),e.jsx(E,{label:"Cost Code",value:p.costCode,onChange:a=>x(t=>d(c({},t),{costCode:a.target.value})),placeholder:"e.g., 1-10-100-5770 (auto-generated if empty)"}),e.jsx(E,{label:"Department",value:p.department,onChange:a=>x(t=>d(c({},t),{department:a.target.value})),placeholder:"e.g., IT, Finance, Operations"}),e.jsx(j,{type:"submit",variant:"contained",color:"success",className:"w-full",disabled:M,children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"person_add"}),"Create User"]})})]})]}),e.jsxs(q,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-purple-600",children:"import_export"}),"CSV Import/Export"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--md-sys-color-on-surface)] mb-2",children:"Import Data"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".csv",onChange:Z,className:"hidden",id:"items-csv-import"}),e.jsx(j,{onClick:()=>document.getElementById("items-csv-import").click(),variant:"outlined",color:"primary",className:"w-full",disabled:b.importingItems,children:b.importingItems?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"upload_file"}),"Import Items"]})})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".csv",onChange:J,className:"hidden",id:"users-csv-import"}),e.jsx(j,{onClick:()=>document.getElementById("users-csv-import").click(),variant:"outlined",color:"primary",className:"w-full",disabled:b.importingUsers,children:b.importingUsers?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"upload_file"}),"Import Users"]})})]})]})]}),e.jsxs("div",{className:"border-t border-[var(--md-sys-color-outline-variant)] pt-4",children:[e.jsx("h4",{className:"font-medium text-[var(--md-sys-color-on-surface)] mb-2",children:"Export Data"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(j,{onClick:O,variant:"outlined",color:"secondary",className:"w-full",disabled:b.exportingItems,children:b.exportingItems?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"download"}),"Export Items (",(n==null?void 0:n.length)||0,")"]})}),e.jsx(j,{onClick:G,variant:"outlined",color:"secondary",className:"w-full",disabled:b.exportingUsers,children:b.exportingUsers?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"download"}),"Export Users (",(l==null?void 0:l.length)||0,")"]})})]})]}),e.jsxs("div",{className:"text-xs text-[var(--md-sys-color-on-surface-variant)] p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"üìã CSV Format Tips:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," Item Name, Category, Quantity, Price, ASIN, Min Threshold"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Users:"})," EmployeeID, First Name, Last Name, Cost Code, Department"]})]})]})]}),e.jsxs(q,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-orange-600",children:"batch_prediction"}),"Bulk Operations"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--md-sys-color-on-surface)] mb-2",children:"Inventory Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(j,{onClick:O,variant:"outlined",color:"primary",className:"w-full",children:[e.jsx("span",{className:"material-icons mr-2",children:"edit"}),"Bulk Edit via CSV Export/Import"]}),e.jsxs(j,{onClick:()=>alert("Price bulk update: Export CSV, edit prices, then import back"),variant:"outlined",color:"primary",className:"w-full",children:[e.jsx("span",{className:"material-icons mr-2",children:"attach_money"}),"Update Prices via CSV"]}),e.jsxs(j,{onClick:K,variant:"outlined",color:"error",className:"w-full",children:[e.jsx("span",{className:"material-icons mr-2",children:"restore"}),"Reset All Quantities to Zero"]})]})]}),e.jsxs("div",{className:"text-xs text-[var(--md-sys-color-on-surface-variant)] p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"‚ö†Ô∏è Bulk Operations:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edit/Prices:"})," Use CSV export ‚Üí edit ‚Üí import workflow"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset:"})," Sets ALL item quantities to zero (permanent!)"]})]})]})]}),e.jsxs(q,{elevation:2,className:"lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-indigo-600",children:"analytics"}),"System Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(n==null?void 0:n.length)||0}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Total Items"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(l==null?void 0:l.length)||0,"+"]}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Active Users"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:(D==null?void 0:D.length)||0}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Recent Checkouts"})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:($==null?void 0:$.length)||0}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Low Stock Alerts"})]})]})]})]})]})};export{de as default};
