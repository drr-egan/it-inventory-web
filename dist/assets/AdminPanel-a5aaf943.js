var W=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var P=(n,r,l)=>r in n?W(n,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[r]=l,c=(n,r)=>{for(var l in r||(r={}))H.call(r,l)&&P(n,l,r[l]);if(V)for(var l of V(r))ee.call(r,l)&&P(n,l,r[l]);return n},d=(n,r)=>X(n,Y(r));var y=(n,r,l)=>new Promise((A,$)=>{var g=x=>{try{p(l.next(x))}catch(S){$(S)}},C=x=>{try{p(l.throw(x))}catch(S){$(S)}},p=x=>x.done?A(x.value):Promise.resolve(x.value).then(g,C);p((l=l.apply(n,r)).next())});import{j as e,d as F}from"./index-3568ad3f.js";import{r as q}from"./react-vendor-3371026b.js";import{f as U,j as R,d as B,w as ae,h as te}from"./firebase-vendor-3599879c.js";import{M as D,a as j}from"./MaterialButton-a76764f8.js";import{M as E}from"./MaterialInput-0df2436e.js";const ce=({user:n,items:r,users:l,checkoutHistory:A,notifications:$})=>{const[g,C]=q.useState({name:"",category:"",quantity:"",price:"",minThreshold:"5"}),[p,x]=q.useState({firstName:"",lastName:"",costCode:"",department:""}),[S,L]=q.useState(!1),[M,O]=q.useState(!1),[b,N]=q.useState({importingItems:!1,importingUsers:!1,exportingItems:!1,exportingUsers:!1}),z=a=>y(void 0,null,function*(){a.preventDefault(),L(!0);try{const t={name:g.name.trim(),category:g.category||"Uncategorized",quantity:parseInt(g.quantity)||0,price:parseFloat(g.price)||0,minThreshold:parseInt(g.minThreshold)||5,createdAt:U(),lastUpdated:U(),createdBy:(n==null?void 0:n.email)||"admin"};yield R(B(F,"items"),t),C({name:"",category:"",quantity:"",price:"",minThreshold:"5"}),alert(`Item "${t.name}" created successfully!`)}catch(t){console.error("Error creating item:",t),alert(`Failed to create item: ${t.message}`)}finally{L(!1)}}),Q=a=>y(void 0,null,function*(){a.preventDefault(),O(!0);try{const t={firstName:p.firstName.trim(),lastName:p.lastName.trim(),name:`${p.firstName.trim()} ${p.lastName.trim()}`,costCode:p.costCode||`${Date.now()}-${Math.floor(Math.random()*1e3)}-5770`,department:p.department||"General",status:"active",createdAt:U(),createdBy:(n==null?void 0:n.email)||"admin"};yield R(B(F,"users"),t),x({firstName:"",lastName:"",costCode:"",department:""}),alert(`User "${t.name}" created successfully!`)}catch(t){console.error("Error creating user:",t),alert(`Failed to create user: ${t.message}`)}finally{O(!1)}}),_=()=>y(void 0,null,function*(){N(a=>d(c({},a),{exportingItems:!0}));try{const t=[["Item Name","Category","Quantity","Price","ASIN","Min Threshold"].join(",")];r.forEach(o=>{const w=[`"${o.name||""}"`,`"${o.category||"Uncategorized"}"`,o.quantity||0,o.price||0,`"${o.asin||""}"`,o.minThreshold||5];t.push(w.join(","))});const u=t.join(`
`),v=new Blob([u],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(v),i.download=`inventory-items-${new Date().toISOString().split("T")[0]}.csv`,i.click(),alert(`Exported ${r.length} items to CSV`)}catch(a){alert(`Export failed: ${a.message}`)}finally{N(a=>d(c({},a),{exportingItems:!1}))}}),G=()=>y(void 0,null,function*(){N(a=>d(c({},a),{exportingUsers:!0}));try{const t=[["First Name","Last Name","Cost Code","Department","Status"].join(",")];l.forEach(o=>{const w=[`"${o.firstName||""}"`,`"${o.lastName||""}"`,`"${o.costCode||o.cost_code||""}"`,`"${o.department||""}"`,`"${o.status||"active"}"`];t.push(w.join(","))});const u=t.join(`
`),v=new Blob([u],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(v),i.download=`inventory-users-${new Date().toISOString().split("T")[0]}.csv`,i.click(),alert(`Exported ${l.length} users to CSV`)}catch(a){alert(`Export failed: ${a.message}`)}finally{N(a=>d(c({},a),{exportingUsers:!1}))}}),Z=a=>{const t=a.target.files[0];if(!t)return;N(v=>d(c({},v),{importingItems:!0}));const u=new FileReader;u.onload=v=>y(void 0,null,function*(){try{const o=v.target.result.split(`
`),w=o[0].split(",").map(h=>h.replace(/"/g,"").trim());let T=0,I=0;for(let h=1;h<o.length;h++)if(o[h].trim())try{const m=o[h].split(",").map(k=>k.replace(/"/g,"").trim()),s={};if(w.forEach((k,f)=>{switch(k.toLowerCase()){case"item name":case"name":s.name=m[f];break;case"category":s.category=m[f]||"Uncategorized";break;case"quantity":s.quantity=parseInt(m[f])||0;break;case"price":s.price=parseFloat(m[f])||0;break;case"min threshold":s.minThreshold=parseInt(m[f])||5;break;case"asin":s.asin=m[f];break}}),!s.name){I++;continue}s.createdAt=U(),s.lastUpdated=U(),s.createdBy=(n==null?void 0:n.email)||"csv-import",yield R(B(F,"items"),s),T++}catch(m){I++,console.error("Error importing item:",m)}alert(`Import completed: ${T} items added, ${I} errors`)}catch(i){alert(`Import failed: ${i.message}`)}finally{N(i=>d(c({},i),{importingItems:!1})),a.target.value=""}}),u.readAsText(t)},J=a=>{const t=a.target.files[0];if(!t)return;N(v=>d(c({},v),{importingUsers:!0}));const u=new FileReader;u.onload=v=>y(void 0,null,function*(){try{const o=v.target.result.split(`
`),w=o[0].split(",").map(h=>h.replace(/"/g,"").trim());let T=0,I=0;for(let h=1;h<o.length;h++)if(o[h].trim())try{const m=o[h].split(",").map(k=>k.replace(/"/g,"").trim()),s={};if(w.forEach((k,f)=>{switch(k.toLowerCase()){case"first name":case"firstname":s.firstName=m[f];break;case"last name":case"lastname":s.lastName=m[f];break;case"cost code":case"costcode":s.costCode=m[f];break;case"department":s.department=m[f];break}}),!s.firstName||!s.lastName){I++;continue}s.name=`${s.firstName} ${s.lastName}`,s.status="active",s.costCode=s.costCode||`${Date.now()}-${Math.floor(Math.random()*1e3)}-5770`,s.createdAt=U(),s.createdBy=(n==null?void 0:n.email)||"csv-import",yield R(B(F,"users"),s),T++}catch(m){I++,console.error("Error importing user:",m)}alert(`Import completed: ${T} users added, ${I} errors`)}catch(i){alert(`Import failed: ${i.message}`)}finally{N(i=>d(c({},i),{importingUsers:!1})),a.target.value=""}}),u.readAsText(t)},K=()=>y(void 0,null,function*(){if(confirm("Are you sure you want to reset ALL item quantities to zero? This cannot be undone."))try{const a=ae(F);r.forEach(t=>{const u=te(F,"items",t.id);a.update(u,{quantity:0,lastUpdated:U()})}),yield a.commit(),alert(`Reset quantities for ${r.length} items`)}catch(a){alert(`Bulk reset failed: ${a.message}`)}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-[var(--md-sys-color-surface-container)] rounded-lg p-6 md-elevation-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-[var(--md-sys-color-on-surface)] flex items-center mb-2",children:[e.jsx("span",{className:"material-icons mr-2",children:"admin_panel_settings"}),"Administration"]}),e.jsx("p",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Administrative tools, data management, and bulk operations"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6",children:[e.jsxs(D,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-blue-600",children:"add_box"}),"Add New Item"]}),e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsx(E,{label:"Item Name",value:g.name,onChange:a=>C(t=>d(c({},t),{name:a.target.value})),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"Price",type:"number",step:"0.01",value:g.price,onChange:a=>C(t=>d(c({},t),{price:a.target.value})),placeholder:"0.00"}),e.jsx(E,{label:"Quantity",type:"number",value:g.quantity,onChange:a=>C(t=>d(c({},t),{quantity:a.target.value})),placeholder:"0"})]}),e.jsxs("div",{className:"mat-input",children:[e.jsxs("select",{value:g.category,onChange:a=>C(t=>d(c({},t),{category:a.target.value})),className:"w-full px-3 py-2 bg-[var(--md-sys-color-surface-container-high)] text-[var(--md-sys-color-on-surface)] rounded-lg border border-[var(--md-sys-color-outline-variant)]",children:[e.jsx("option",{value:"",children:"Choose category..."}),e.jsx("option",{value:"Electronics",children:"Electronics"}),e.jsx("option",{value:"Accessories",children:"Accessories"}),e.jsx("option",{value:"Cables",children:"Cables"}),e.jsx("option",{value:"Office",children:"Office"}),e.jsx("option",{value:"Hardware",children:"Hardware"}),e.jsx("option",{value:"Software",children:"Software"}),e.jsx("option",{value:"Supplies",children:"Supplies"})]}),e.jsx("label",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Category"})]}),e.jsx(j,{type:"submit",variant:"contained",color:"primary",className:"w-full",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"add"}),"Create Item"]})})]})]}),e.jsxs(D,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-green-600",children:"person_add"}),"Add New User"]}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(E,{label:"First Name",value:p.firstName,onChange:a=>x(t=>d(c({},t),{firstName:a.target.value})),required:!0}),e.jsx(E,{label:"Last Name",value:p.lastName,onChange:a=>x(t=>d(c({},t),{lastName:a.target.value})),required:!0})]}),e.jsx(E,{label:"Cost Code",value:p.costCode,onChange:a=>x(t=>d(c({},t),{costCode:a.target.value})),placeholder:"e.g., 1-10-100-5770 (auto-generated if empty)"}),e.jsx(E,{label:"Department",value:p.department,onChange:a=>x(t=>d(c({},t),{department:a.target.value})),placeholder:"e.g., IT, Finance, Operations"}),e.jsx(j,{type:"submit",variant:"contained",color:"success",className:"w-full",disabled:M,children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"person_add"}),"Create User"]})})]})]}),e.jsxs(D,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-purple-600",children:"import_export"}),"CSV Import/Export"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--md-sys-color-on-surface)] mb-2",children:"Import Data"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".csv",onChange:Z,className:"hidden",id:"items-csv-import"}),e.jsx(j,{onClick:()=>document.getElementById("items-csv-import").click(),variant:"outlined",color:"primary",className:"w-full",disabled:b.importingItems,children:b.importingItems?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"upload_file"}),"Import Items"]})})]}),e.jsxs("div",{children:[e.jsx("input",{type:"file",accept:".csv",onChange:J,className:"hidden",id:"users-csv-import"}),e.jsx(j,{onClick:()=>document.getElementById("users-csv-import").click(),variant:"outlined",color:"primary",className:"w-full",disabled:b.importingUsers,children:b.importingUsers?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"upload_file"}),"Import Users"]})})]})]})]}),e.jsxs("div",{className:"border-t border-[var(--md-sys-color-outline-variant)] pt-4",children:[e.jsx("h4",{className:"font-medium text-[var(--md-sys-color-on-surface)] mb-2",children:"Export Data"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(j,{onClick:_,variant:"outlined",color:"secondary",className:"w-full",disabled:b.exportingItems,children:b.exportingItems?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"download"}),"Export Items (",(r==null?void 0:r.length)||0,")"]})}),e.jsx(j,{onClick:G,variant:"outlined",color:"secondary",className:"w-full",disabled:b.exportingUsers,children:b.exportingUsers?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2",children:"download"}),"Export Users (",(l==null?void 0:l.length)||0,")"]})})]})]}),e.jsxs("div",{className:"text-xs text-[var(--md-sys-color-on-surface-variant)] p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"üìã CSV Format Tips:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Items:"})," Item Name, Category, Quantity, Price, ASIN, Min Threshold"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Users:"})," First Name, Last Name, Cost Code, Email, Department"]})]})]})]}),e.jsxs(D,{elevation:2,children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-orange-600",children:"batch_prediction"}),"Bulk Operations"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[var(--md-sys-color-on-surface)] mb-2",children:"Inventory Management"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(j,{onClick:_,variant:"outlined",color:"primary",className:"w-full",children:[e.jsx("span",{className:"material-icons mr-2",children:"edit"}),"Bulk Edit via CSV Export/Import"]}),e.jsxs(j,{onClick:()=>alert("Price bulk update: Export CSV, edit prices, then import back"),variant:"outlined",color:"primary",className:"w-full",children:[e.jsx("span",{className:"material-icons mr-2",children:"attach_money"}),"Update Prices via CSV"]}),e.jsxs(j,{onClick:K,variant:"outlined",color:"error",className:"w-full",children:[e.jsx("span",{className:"material-icons mr-2",children:"restore"}),"Reset All Quantities to Zero"]})]})]}),e.jsxs("div",{className:"text-xs text-[var(--md-sys-color-on-surface-variant)] p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"‚ö†Ô∏è Bulk Operations:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Edit/Prices:"})," Use CSV export ‚Üí edit ‚Üí import workflow"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset:"})," Sets ALL item quantities to zero (permanent!)"]})]})]})]}),e.jsxs(D,{elevation:2,className:"lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--md-sys-color-on-surface)] mb-4 flex items-center",children:[e.jsx("span",{className:"material-icons mr-2 text-indigo-600",children:"analytics"}),"System Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(r==null?void 0:r.length)||0}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Total Items"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[(l==null?void 0:l.length)||0,"+"]}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Active Users"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:(A==null?void 0:A.length)||0}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Recent Checkouts"})]}),e.jsxs("div",{className:"text-center p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:($==null?void 0:$.length)||0}),e.jsx("div",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:"Low Stock Alerts"})]})]})]})]})]})};export{ce as default};
