var T=Object.defineProperty,V=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var _=(t,s,a)=>s in t?T(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,h=(t,s)=>{for(var a in s||(s={}))E.call(s,a)&&_(t,a,s[a]);if(C)for(var a of C(s))L.call(s,a)&&_(t,a,s[a]);return t},f=(t,s)=>V(t,W(s));var M=(t,s)=>{var a={};for(var n in t)E.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&C)for(var n of C(t))s.indexOf(n)<0&&L.call(t,n)&&(a[n]=t[n]);return a};import{j as e,L as G,d as U}from"./index-779badf6.js";import{r as u}from"./react-vendor-3371026b.js";import{q as z,c as B,d as D,e as Q}from"./firebase-vendor-6f993aa2.js";import H from"./ShoppingCart-4154892e.js";const J=b=>{var i=b,{children:t,elevation:s=1,className:a=""}=i,n=M(i,["children","elevation","className"]);return e.jsx("div",f(h({className:`mat-card mat-elevation-${s} p-6 ${a}`},n),{children:t}))},S=j=>{var y=j,{children:t,variant:s="contained",color:a="primary",onClick:n,disabled:b,className:i=""}=y,d=M(y,["children","variant","color","onClick","disabled","className"]);const o=`mat-ripple inline-flex items-center justify-center px-6 py-3 font-medium text-sm rounded transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ${{contained:{primary:"bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-800 focus:ring-blue-500 mat-elevation-2",secondary:"bg-gray-600 dark:bg-gray-700 text-white hover:bg-gray-700 dark:hover:bg-gray-800 focus:ring-gray-500 mat-elevation-2",success:"bg-green-600 dark:bg-green-700 text-white hover:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500 mat-elevation-2",error:"bg-red-600 dark:bg-red-700 text-white hover:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500 mat-elevation-2"},outlined:{primary:"border border-blue-600 dark:border-blue-500 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:ring-blue-500",secondary:"border border-gray-600 dark:border-gray-500 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 focus:ring-gray-500",success:"border border-green-600 dark:border-green-500 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 focus:ring-green-500",error:"border border-red-600 dark:border-red-500 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 focus:ring-red-500"},text:{primary:"text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:ring-blue-500",secondary:"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 focus:ring-gray-500",success:"text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 focus:ring-green-500",error:"text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 focus:ring-red-500"}}[s][a]} ${b?"opacity-50 cursor-not-allowed":""} ${i}`;return e.jsx("button",f(h({className:o,onClick:n,disabled:b},d),{children:t}))},K=({currentPage:t,totalItems:s,itemsPerPage:a,onPageChange:n,onItemsPerPageChange:b,className:i=""})=>{const d=Math.ceil(s/a),j=(t-1)*a+1,y=Math.min(t*a,s),k=()=>{const o=[],x=[];for(let c=Math.max(2,t-2);c<=Math.min(d-1,t+2);c++)o.push(c);return t-2>2?x.push(1,"..."):x.push(1),x.push(...o),t+2<d-1?x.push("...",d):x.push(d),x.filter((c,I,m)=>m.indexOf(c)===I)};return d<=1?null:e.jsxs("div",{className:`flex items-center justify-between flex-wrap gap-4 mt-6 ${i}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",j,"-",y," of ",s," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Items per page:"}),e.jsxs("select",{value:a,onChange:l=>b(parseInt(l.target.value)),className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{variant:"text",color:"primary",onClick:()=>n(t-1),disabled:t===1,className:"!p-2 !min-w-0",children:e.jsx("span",{className:"material-icons",children:"chevron_left"})}),k().map((l,o)=>l==="..."?e.jsx("span",{className:"px-2 text-gray-400 dark:text-gray-500",children:"..."},`dots-${o}`):e.jsx(S,{variant:t===l?"contained":"text",color:"primary",onClick:()=>n(l),className:"!p-2 !min-w-[40px] !w-10 !h-10",children:l},l)),e.jsx(S,{variant:"text",color:"primary",onClick:()=>n(t+1),disabled:t===d,className:"!p-2 !min-w-0",children:e.jsx("span",{className:"material-icons",children:"chevron_right"})})]})]})},te=({user:t,cart:s,addToCart:a,removeFromCart:n,clearCart:b})=>{const[i,d]=u.useState([]),[j,y]=u.useState([]),[k,l]=u.useState(!0),[o,x]=u.useState(""),[c,I]=u.useState("all"),[m,P]=u.useState({currentPage:1,itemsPerPage:50,totalItems:0});u.useEffect(()=>{const r=z(D(U,"items"),B("name")),g=Q(r,p=>{const q=p.docs.map(v=>h({id:v.id},v.data()));d(q),l(!1)},p=>{console.error("Error fetching items:",p),l(!1)}),$=z(D(U,"users"),B("firstName")),w=Q($,p=>{const q=p.docs.map(v=>h({id:v.id},v.data()));y(q)},p=>{console.error("Error fetching users:",p)});return()=>{g(),w()}},[]);const A=["all",...new Set(i.map(r=>r.category||"Uncategorized"))],N=i.filter(r=>{var w;const g=(w=r.name)==null?void 0:w.toLowerCase().includes(o.toLowerCase()),$=c==="all"||r.category===c;return g&&$&&(r.quantity||0)>0});u.useEffect(()=>{P(r=>f(h({},r),{totalItems:N.length}))},[N.length]);const F=()=>{const r=(m.currentPage-1)*m.itemsPerPage,g=r+m.itemsPerPage;return N.slice(r,g)},O=r=>{P(g=>f(h({},g),{currentPage:r}))},R=r=>{P(g=>f(h({},g),{itemsPerPage:r,currentPage:1}))};return k?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(G,{size:"large"}),e.jsx("span",{className:"ml-4 dark:text-gray-300",children:"Loading shop..."})]}):e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-4 lg:space-y-6 order-2 xl:order-1",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"material-icons text-xl mr-2 text-blue-600",children:"qr_code_scanner"}),e.jsx("h3",{className:"text-lg font-medium dark:text-white",children:"Barcode Scanner"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ready"})]})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quick add items to cart by scanning barcodes or typing item names"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center mb-4",children:[e.jsx("span",{className:"material-icons mr-2",children:"storefront"}),"Shop Items"]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search items...",value:o,onChange:r=>x(r.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),e.jsx("select",{value:c,onChange:r=>I(r.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:A.map(r=>e.jsx("option",{value:r,children:r==="all"?"All Categories":r},r))})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-3 lg:gap-4",children:F().map(r=>e.jsxs(J,{elevation:1,className:"!p-3 lg:!p-4 hover:mat-elevation-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:r.name}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.quantity<=(r.minThreshold||5)?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300":"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300"}`,children:r.quantity})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"material-icons text-xs mr-1",children:"category"}),r.category||"Uncategorized"]}),r.price>0&&e.jsxs("div",{className:"flex items-center mt-1 text-green-600 dark:text-green-400 font-medium",children:[e.jsx("span",{className:"material-icons text-xs mr-1",children:"attach_money"}),"$",r.price]})]}),e.jsx(S,{onClick:()=>a(r),disabled:r.quantity===0,variant:"contained",color:"primary",className:"w-full !py-2",children:r.quantity===0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2 text-sm",children:"block"}),"Out of Stock"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2 text-sm",children:"add_shopping_cart"}),"Add to Cart"]})})]},r.id))}),e.jsx(K,{currentPage:m.currentPage,totalItems:m.totalItems,itemsPerPage:m.itemsPerPage,onPageChange:O,onItemsPerPageChange:R}),N.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("span",{className:"material-icons text-4xl text-gray-400 dark:text-gray-500",children:"inbox"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"No items found"})]})]})]}),e.jsx("div",{className:"order-1 xl:order-2",children:e.jsx(H,{cart:s,addToCart:a,removeFromCart:n,clearCart:b,users:j,onCheckout:()=>{console.log("Checkout completed")}})})]})};export{te as default};
