var Q=Object.defineProperty;var b=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var j=(t,r,a)=>r in t?Q(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,g=(t,r)=>{for(var a in r||(r={}))A.call(r,a)&&j(t,a,r[a]);if(b)for(var a of b(r))B.call(r,a)&&j(t,a,r[a]);return t};import{j as e,L as D,d as f}from"./index-e62ba6ab.js";import{r as n}from"./react-vendor-3371026b.js";import{q as N,c as k,d as v,e as w}from"./firebase-vendor-6f993aa2.js";import F from"./ShoppingCart-aaa8c924.js";const G=({user:t,cart:r,addToCart:a,removeFromCart:S,clearCart:C})=>{const[h,q]=n.useState([]),[L,E]=n.useState([]),[U,u]=n.useState(!0),[p,_]=n.useState(""),[i,z]=n.useState("all");n.useEffect(()=>{const s=N(v(f,"items"),k("name")),o=w(s,l=>{const m=l.docs.map(d=>g({id:d.id},d.data()));q(m),u(!1)},l=>{console.error("Error fetching items:",l),u(!1)}),x=N(v(f,"users"),k("firstName")),c=w(x,l=>{const m=l.docs.map(d=>g({id:d.id},d.data()));E(m)},l=>{console.error("Error fetching users:",l)});return()=>{o(),c()}},[]);const I=["all",...new Set(h.map(s=>s.category||"Uncategorized"))],y=h.filter(s=>{var c;const o=(c=s.name)==null?void 0:c.toLowerCase().includes(p.toLowerCase()),x=i==="all"||s.category===i;return o&&x&&(s.quantity||0)>0});return U?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(D,{size:"large"}),e.jsx("span",{className:"ml-4 dark:text-gray-300",children:"Loading shop..."})]}):e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 lg:gap-6",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-4 lg:space-y-6 order-2 xl:order-1",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"material-icons text-xl mr-2 text-blue-600",children:"qr_code_scanner"}),e.jsx("h3",{className:"text-lg font-medium dark:text-white",children:"Barcode Scanner"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ready"})]})]}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quick add items to cart by scanning barcodes or typing item names"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-md",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center mb-4",children:[e.jsx("span",{className:"material-icons mr-2",children:"storefront"}),"Shop Items"]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("input",{type:"text",placeholder:"Search items...",value:p,onChange:s=>_(s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"}),e.jsx("select",{value:i,onChange:s=>z(s.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500",children:I.map(s=>e.jsx("option",{value:s,children:s==="all"?"All Categories":s},s))})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(s=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white line-clamp-2",children:s.name}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.quantity<=(s.minThreshold||5)?"bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300":"bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300"}`,children:s.quantity})]}),e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"material-icons text-xs mr-1",children:"category"}),s.category||"Uncategorized"]}),s.price>0&&e.jsxs("div",{className:"flex items-center mt-1 text-green-600 dark:text-green-400 font-medium",children:[e.jsx("span",{className:"material-icons text-xs mr-1",children:"attach_money"}),"$",s.price]})]}),e.jsx("button",{onClick:()=>a(s),disabled:s.quantity===0,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg font-medium transition-all flex items-center justify-center",children:s.quantity===0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2 text-sm",children:"block"}),"Out of Stock"]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"material-icons mr-2 text-sm",children:"add_shopping_cart"}),"Add to Cart"]})})]},s.id))}),y.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("span",{className:"material-icons text-4xl text-gray-400 dark:text-gray-500",children:"inbox"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"No items found"})]})]})]}),e.jsx("div",{className:"order-1 xl:order-2",children:e.jsx(F,{cart:r,addToCart:a,removeFromCart:S,clearCart:C,users:L,onCheckout:()=>{console.log("Checkout completed")}})})]})};export{G as default};
