var q=Object.defineProperty,L=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var v=(o,a,r)=>a in o?q(o,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[a]=r,d=(o,a)=>{for(var r in a||(a={}))E.call(a,r)&&v(o,r,a[r]);if(y)for(var r of y(a))T.call(a,r)&&v(o,r,a[r]);return o},m=(o,a)=>L(o,w(a));import{j as s,L as z,d as I}from"./index-c582cf04.js";import{r as n}from"./react-vendor-3371026b.js";import{q as Q,c as k,d as U,e as _}from"./firebase-vendor-7cc9ba84.js";const M=({user:o,cart:a,setCart:r})=>{const[x,f]=n.useState([]),[j,u]=n.useState(!0),[h,N]=n.useState(""),[i,b]=n.useState("all");n.useEffect(()=>{const e=Q(U(I,"items"),k("name")),c=_(e,t=>{const l=t.docs.map(g=>d({id:g.id},g.data()));f(l),u(!1)},t=>{console.error("Error fetching items:",t),u(!1)});return()=>c()},[]);const S=["all",...new Set(x.map(e=>e.category||"Uncategorized"))],p=x.filter(e=>{var l;const c=(l=e.name)==null?void 0:l.toLowerCase().includes(h.toLowerCase()),t=i==="all"||e.category===i;return c&&t&&(e.quantity||0)>0}),C=e=>{const c=a.find(t=>t.id===e.id);r(c?a.map(t=>t.id===e.id?m(d({},t),{cartQuantity:t.cartQuantity+1}):t):[...a,m(d({},e),{cartQuantity:1})])};return j?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(z,{size:"large"}),s.jsx("span",{className:"ml-4",children:"Loading shop..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-[var(--md-sys-color-surface-container)] rounded-lg p-6 md-elevation-1",children:[s.jsxs("h2",{className:"text-2xl font-bold text-[var(--md-sys-color-on-surface)] flex items-center mb-4",children:[s.jsx("span",{className:"material-icons mr-2",children:"storefront"}),"Shop"]}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsx("input",{type:"text",placeholder:"Search items...",value:h,onChange:e=>N(e.target.value),className:"flex-1 px-4 py-2 border border-[var(--md-sys-color-outline)] rounded-lg bg-[var(--md-sys-color-surface)] text-[var(--md-sys-color-on-surface)]"}),s.jsx("select",{value:i,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-[var(--md-sys-color-outline)] rounded-lg bg-[var(--md-sys-color-surface)] text-[var(--md-sys-color-on-surface)]",children:S.map(e=>s.jsx("option",{value:e,children:e==="all"?"All Categories":e},e))})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>s.jsxs("div",{className:"bg-[var(--md-sys-color-surface-container)] rounded-lg p-4 md-elevation-1 hover:md-elevation-2 transition-all",children:[s.jsx("h3",{className:"font-semibold text-[var(--md-sys-color-on-surface)] mb-2",children:e.name}),s.jsx("p",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)] mb-2",children:e.category||"Uncategorized"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-[var(--md-sys-color-on-surface-variant)]",children:["Stock: ",s.jsx("span",{className:e.quantity<=(e.minThreshold||0)?"text-[var(--md-sys-color-error)]":"text-[var(--md-sys-color-success)]",children:e.quantity})]}),e.price>0&&s.jsxs("p",{className:"text-lg font-bold text-[var(--md-sys-color-primary)]",children:["$",Number(e.price).toFixed(2)]})]}),s.jsx("button",{onClick:()=>C(e),className:"md-button primary",children:s.jsx("span",{className:"material-icons",children:"add_shopping_cart"})})]})]},e.id))}),p.length===0&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("span",{className:"material-icons text-4xl text-[var(--md-sys-color-on-surface-variant)]",children:"inbox"}),s.jsx("p",{className:"text-[var(--md-sys-color-on-surface-variant)] mt-2",children:"No items found"})]})]})};export{M as default};
